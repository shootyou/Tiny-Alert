!function($,window,undefined){var win=$(window),count=($(document),1),isLock=!1,Dialog=function(options){this.settings=$.extend({},Dialog.defaults,options),this.init()};Dialog.prototype={init:function(){this.create(),this.settings.lock&&this.lock(),isNaN(this.settings.time)||null==this.settings.time||this.time()},create:function(){var divHeader=null==this.settings.title?"":'<div class="rDialog-header-'+this.settings.title+'"></div>',templates='<div class="rDialog-wrap">'+divHeader+'<div class="rDialog-content">'+this.settings.content+'</div><div class="rDialog-footer"></div></div>';this.dialog=$("<div>").addClass("rDialog").css({zIndex:this.settings.zIndex+count++}).html(templates).prependTo("body"),$.isFunction(this.settings.ok)&&this.ok(),$.isFunction(this.settings.cancel)&&this.cancel(),this.size(),this.position()},ok:function(){var _this=this,footer=this.dialog.find(".rDialog-footer");$("<a>",{href:"javascript:;",text:this.settings.okText}).on("click",function(){var okCallback=_this.settings.ok();(okCallback==undefined||okCallback)&&_this.close()}).addClass("rDialog-ok").prependTo(footer)},cancel:function(){var _this=this,footer=this.dialog.find(".rDialog-footer");$("<a>",{href:"javascript:;",text:this.settings.cancelText}).on("click",function(){var cancelCallback=_this.settings.cancel();(cancelCallback==undefined||cancelCallback)&&_this.close()}).addClass("rDialog-cancel").appendTo(footer)},size:function(){var content=this.dialog.find(".rDialog-content");this.dialog.find(".rDialog-wrap");content.css({width:this.settings.width,height:this.settings.height})},position:function(){var _this=this,winWidth=win.width(),winHeight=win.height(),scrollTop=0;this.dialog.css({left:(winWidth-_this.dialog.width())/2,top:(winHeight-_this.dialog.height())/2+scrollTop})},lock:function(){isLock||(this.lock=$("<div>").css({zIndex:this.settings.zIndex}).addClass("rDialog-mask"),this.lock.appendTo("body"),isLock=!0)},unLock:function(){this.settings.lock&&isLock&&(this.lock.remove(),isLock=!1)},close:function(){this.dialog.remove(),this.unLock()},time:function(){var _this=this;this.closeTimer=setTimeout(function(){_this.close()},this.settings.time)}},Dialog.defaults={content:"加载中...",title:"load",width:"auto",height:"auto",ok:null,cancel:null,okText:"确定",cancelText:"取消",time:null,lock:!0,zIndex:9999};var rDialog=function(options){return new Dialog(options)};window.rDialog=$.rDialog=$.dialog=rDialog}(window.jQuery||window.Zepto,window);